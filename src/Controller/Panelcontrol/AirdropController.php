<?phpnamespace App\Controller\Panelcontrol;use App\Controller\AppController;use Cake\Core\Configure;use Cake\Network\Exception\ForbiddenException;use Cake\Network\Exception\NotFoundException;use Cake\View\Exception\MissingTemplateException;use Cake\ORM\TableRegistry;use Cake\Network\Session\DatabaseSession;use Cake\Controller\Component\FlashComponent;use Cake\Datasource\ConnectionManager;use Cake\Mailer\Email;class AirdropController extends AppController{    public function add()    {        if (!$this->request->getSession()->check("adminUserId")) {            return $this->redirect($this->backend_url.'/user/login');        }        $prefix_title = $this->backendTitle;        $title = $prefix_title . " Manage Airdrop : Add Airdrop";        $this->set("title", $title);        $airdropsTable = TableRegistry::get("Airdrops");        if ($this->request->is("post")) {            /*echo '<pre>';            print_r($this->request->getData());            exit;*/            $name = $this->request->getData()["Airdrop"]["name"] ? $this->request->getData()["Airdrop"]["name"] : '';            $wallet_address = $this->request->getData()["Airdrop"]["wallet_address"] ? $this->request->getData()["Airdrop"]["wallet_address"] : '';            $amount = $this->request->getData()["Airdrop"]["amount"] ? $this->request->getData()["Airdrop"]["amount"] : '';            $remark = $this->request->getData()["Airdrop"]["remark"] ? $this->request->getData()["Airdrop"]["remark"] : '';            if (                $name && $wallet_address && $amount && $remark            ) {                $airdrop = $airdropsTable->newEmptyEntity();                $airdrop->name = $name;                $airdrop->wallet_address = $wallet_address;                $airdrop->amount = $amount;                $airdrop->remark = nl2br($remark);                $airdrop->status = 0;                if ($airdropsTable->save($airdrop)) {                    $this->Flash->success(__("Airdrop has been added successfully."));                    return $this->redirect($this->backend_url.'/airdrop/add');                }            } else {                $this->Flash->error(__("Fields marked with * are mandatory."));            }        }    }    public function list()    {        if (!$this->request->getSession()->check("adminUserId")) {            return $this->redirect($this->backend_url.'/user/login');        }        $prefix_title = $this->backendTitle;        $title = $prefix_title . " Manage Airdrop : Airdrop List";        $this->set("title", $title);        $airdropsTable = TableRegistry::get("Airdrops");                $order = ['Airdrops.id' => 'DESC'];        $airdrops = $airdropsTable->find('all', array('order' => $order))->enableAutoFields(true)->toArray();        $this->set('airdrops', $airdrops);    }}